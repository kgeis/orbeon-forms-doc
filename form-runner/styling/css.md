# CSS

## Rationale

Form Runner has a built-in theme for forms. This page documents how you can make changes to that default style.

CSS stands for [Cascading Style Sheets](https://developer.mozilla.org/en-US/docs/Web/CSS), and is the standard technology to add style to web pages and web applications. Orbeon Forms supports custom CSS files which allows you to change your forms' appearance. This assumes that you have some CSS knowledge.

## Adding your own CSS files

1. Place your CSS file(s) under one of the following recommended locations:
    - `WEB-INF/resources/forms/assets`: CSS for all forms
    - `WEB-INF/resources/forms/APP/assets`: CSS for app name APP
    - `WEB-INF/resources/forms/APP/FORM/assets`: CSS for app name APP and form name FORM
2. Define the `oxf.fr.css.custom.uri` property to point to the file(s) you added. The path points to location under the `WEB-INF/resources` directory.

```xml
<property as="xs:string" name="oxf.fr.css.custom.uri.*.*">
    /forms/acme/assets/acme.css
</property>
```

You can add more than one file, and just separate the paths by whitespace in the property.

Note that the locations suggested are just about how to organize the files for clarity. In addition, if some CSS files apply to specific app or form names, you must specify the app and form name in the property or properties. For example:


```xml
<property as="xs:string" name="oxf.fr.css.custom.uri.APP.*">
    /forms/APP/assets/my-app.css
</property>

<property as="xs:string" name="oxf.fr.css.custom.uri.APP.FORM">
    /forms/APP/assets/my-app.css
    /forms/APP/FORM/assets/my-app-and-form.css
</property>
```

The names `APP`, `FORM`, `my-app.css` and `my-app-and-form.css` are just placeholders for your own app name, form name, and CSS files names.

If a specific property is defined for an app/form, such as `oxf.fr.css.custom.uri.APP.FORM`, only that property is considered and other properties defined only for a given app but without a specific form, such as `oxf.fr.css.custom.uri.APP.*`, will be ignored. This means that you must repeat references to CSS resources in the more specific property if desired. For example above `/forms/APP/assets/my-app.css` is repeated.

[SINCE Orbeon Forms 2017.1]

In addition to [`oxf.fr.css.custom.uri`](/configuration/properties/form-runner.md#adding-your-own-css), you can also use the following properties, which apply only to the Summary and Detail pages respectively:

- [`oxf.fr.summary.css.custom.uri`](form-runner-summary-page.md#adding-your-own-css-files)
- [`oxf.fr.detail.css.custom.uri`](form-runner-detail-page.md#adding-your-own-css-files)

## Authoring CSS

**Disable the minimal and combined resources**. When working on your CSS, you might want to temporarily set the following properties in your `properties-local.xml`, which  will disable the combined and minimized resources, so the files and line numbers you see in your browser correspond to what you have on disk.

    ```xml
    <property
        as="xs:boolean"
        name="oxf.xforms.minimal-resources"
        value="false"/>

    <property
        as="xs:boolean"
        name="oxf.xforms.combine-resources"
        value="false"/>
    ```
    
    Note that with the [Form Runner Liferay Proxy Portlet](/form-runner/link-embed/liferay-proxy-portlet.md), you cannot disable combined resources as URL rewriting does not work in that case. 
    
**Know which class names to use in your CSS selectors**. We strongly recommend you use the [Chrome Dev Tools](https://developer.chrome.com/devtools) to check which classes are generated by Orbeon Forms. Once you have your CSS working with Chrome and/or Firefox, it is likely that the CSS will work with other modern browsers.

<!--

**Use case** |  **Sample CSS** |  **Description**
-----|-----|-----
Change the width of a column | `.fr-grid-invoice .fr-grid-col-1 { width: 40px }` | 1. In Form Builder, you can name grids (for now [only repeated grids can be named][18]). When doing so, the table element corresponding to your grid gets a `fr-grid-my-name` class, where `my-name` is the name you choose for the grid. In the example, the name was `invoice`.<br>2. Each column gets a class `fr-grid-col-1`, `fr-grid-col-2` and so on, starting with the number 1.
-->

## Orbeon Forms CSS classes

### Prefixes

Orbeon Forms standardizes on the following prefixes for CSS classes:

- `xforms-`: for built-in standard XForms controls
- `xxforms-`: for built-in extension XForms controls
- `fr-`: for Form Runner constructs
- `xbl-`: for XBL components

### Form structure

Class Name          |Element            |Comment   |
----------          |----------         |----------|
`orbeon`            | `<body>`          | body or enclosing embedding element
`xforms-form`       | `<form>`          | enclosing `<form>` handled by Orbeon Forms
`fr-view`           |                   | enclosing element for the Form Runner view
`fr-mode-MODE`      | `.fr-view`        | `MODE`: `new`, `edit`, `view`
`fr-body`           |                   | main form body
`xbl-fr-section`    |                   | section
`fr-section-title`  | `<h2>`, etc.      | section title
`xbl-fr-grid`       |                   | grid

### Grids

Class Name              |Element        |Comment   |
----------              |----------     |----------|
`fr-grid`               |               | enclosing grid element
`fr-repeat`             | `.fr-grid`    | indicate a repeated grid
`fr-repeat-single-row`  | `.fr-grid`    | indicate a repeated grid over a single row
`fr-grid-head`          |               | grid head (repeated grids only)
`fr-grid-master-row`    |               | grid header row (repeated grids only)
`fr-grid-body`          |               | grid body (multiple for repeated grids)
`fr-grid-tr`            |               | grid row
`fr-grid-th`            |               | grid header cell (repeated grids only)
`fr-grid-td`            |               | grid cell

### Wizard

Class Name              |Comment   |
----------              |----------|
`xbl-fr-wizard`         | enclosing wizard element
`fr-wizard-toc`         | wizard table of contents
`fr-wizard-body`        | wizard body

### Built-in controls and components

Form controls can either be *built-in* or *components*.

Class Name          |Element            |Comment   |
----------          |----------         |----------|
`xforms-control`    |                   | built-in control
`xforms-NAME`       | `.xforms-control` | `NAME`: `input`, `textarea`, etc.
`xbl-component`     |                   | component
`xbl-PREFIX-NAME`   | `.xbl-component`  | `PREFIX`: `fr`, etc.; `NAME`: `date`, etc.

### Aspects of a control or component 

Built-in controls and components can have extra CSS classes.

Class Name          |Comment   |
----------          |----------|
`xforms-disabled`   | the control is not visible (non-relevant)
`xforms-readonly`   | the control is readonly
`xforms-type-TYPE`  | `TYPE`: `date`, `boolean`, `integer`, etc.
`xforms-visited`    | the control has been visited by the user, i.e. tabbed out once
`xforms-invalid`    | the control has an error level
`xforms-warning`    | the control has a warning level
`xforms-info`       | the control has an info level
`xforms-required`   | the control is required
`xforms-empty`      | the control is required and empty
`xforms-filled`     | the control is required and filled
`xforms-incremental`| the control is in incremental mode
`xforms-select1-appearance-APPEARANCE`| `APPEARANCE`: `full`, etc.
`xforms-mediatype-TYPE`               | `TYPE`: `image`, `text` etc.
`xforms-mediatype-TYPE-SUBTYPE`       | `SUBTYPE`: `html`, etc.
`xforms-static`     | the control is in static readonly mode
`xforms-field`      | in static readonly mode only, outputs which look like fields [SINCE Orbeon Forms 4.5]

*NOTE: A data type is not present if the control is `xforms-disabled`.*

`xforms-field` applies to `xf:input`, `xf:secret`, `xf:select`/`xf:select1`. It is used to highlight (by default display a field box around) readonly fields in review and PDF modes.

### Classes on other elements

Class Name          |Element            |Comment   |
----------          |----------         |----------|
`xforms-label`      |                   | a label
`xforms-help`       |                   | a help
`xforms-hint`       |                   | a hint
`xforms-alert`      |                   | an alert
`xforms-active`     | `.xforms-alert`   | an active alert
`xforms-items`      |                   | radio/checkbox items
`xforms-selected`   |                   | wrapper around a selected checkbox/radio button
`xforms-deselected` |                   | wrapper around a deselected checkbox/radio button

<!--
## Styling specific controls

xxxx out of date

You style specific controls in your form, say to set the width of an input field, by adding a CSS class on that control. To do so:

1. Edit the source code for the form (in Form Builder, from the left sidebar, under _Advanced_, click on _Edit Source_).
2. Locate the XForms control you need to modify (for instance `<xf:input>` for an input field).
3. If not present, add a class attribute (for instance: `<xf:input class="" ...="">`).
4. Add the space-separated class or classes in the `class` attribute (for instance: `<xf:input class="my-class" ...>`).

The CSS class you use can either be one you define, or one of the following built-in classes:

- `fr-width-2em`: sets the field with to 2 em
- `fr-width-3em`: sets the field with to 3 em
- `fr-width-5em`: sets the field with to 5 em
- `fr-width-7em`: sets the field with to 7 em
- `fr-width-10em`: sets the field with to 10 em
- `fr-width-15em`: sets the field with to 15 em

*NOTE: Since Orbeon Forms 2018.1, it is no longer recommended to use those CSS classes. Instead, vary the width of the 12-column grid cell in Form Builder to the desired size.*

-->

## Other considerations

### Separate vs. inline CSS

You can either:

1. Store your CSS is a separate CSS file, which you either provide in addition or that overrides the default CSS provided by Orbeon Forms. For more on this, see the [`oxf.fr.css.custom.uri`](/configuration/properties/form-runner.md#adding-your-own-css) configuration property. This is the recommended technique if your CSS is intended to be shared by several forms.

2. Put your CSS inline, in the form. Uf your CSS is quite short, and specific to a given form (not to be shared amongst forms), this is a possibility. For this, put the rules within your own `<style>` section of the form:
    ```xml
    <xh:title>My Form Title</xh:title>
    <xh:style type="text/css">
        #fr-view .fr-grid .fr-grid-content .my-class input.xforms-input-input {
            width: 8em
        }
    </xh:style>
    ```
    
_NOTE: Since 2018.1, it is no longer recommended to place any inline CSS, as some servers use the [`Content-Security-Policy` header](https://en.wikipedia.org/wiki/Content_Security_Policy) to disable inline scripts and CSS. Orbeon Forms 2018.1 doesn't include any inline scripts and CSS anymore by default._

### Strength of CSS rules

Bootstrap, XForms engine, Form Runner and Form Builder CSS rules are contained within an enclosing `.orbeon` CSS class. This ensures that the Orbeon CSS rules only apply within an element with that class. It also makes Orbeon CSS rules a bit stronger (more *specific*) than before. You might have to update your custom CSS to take this into account.

See [here for more on CSS specificity](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity).

When defining your own CSS, make sure to use a strong selector, so its precedence is higher than CSS provide by Orbeon Forms, e.g. something like:

```css
.orbeon .fr-grid .my-class .xforms-input-input {
    ...rule...
}
```

### Twitter Bootstrap

Since Orbeon Forms 4.0, Form Runner uses [Twitter Bootstrap](https://getbootstrap.com/2.3.2/) for some aspects of its layout and styling.

*NOTE: If you have custom CSS which works with Orbeon Forms 3.9, it is likely that you will have to update it to work with Orbeon Forms 4.0.*

## Configuring the presentation of automatic PDF output

See [Automatic PDF](automatic-pdf.md).

## Changing the page width

The [default width with Bootstrap](http://getbootstrap.com/2.3.2/scaffolding.html) is 940px, but you can change this by overriding the Bootstrap/Orbeon CSS. As usual, to do so, we recommend you use a tool like the [Chrome DevTools](https://developer.chrome.com/devtools) to find the exact rules you need to override in your environment. For instance, with an out-of-the-box Orbeon Forms deployed as a servlet, you can set the width to 720px with:

```css
.orbeon .container, .orbeon .span12 { width: 720px }
```

## See also

- [Grids CSS](grids.md)
- [Automatic PDF](automatic-pdf.md)
